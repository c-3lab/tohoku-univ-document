# Glideサンプルアプリの作成手順

本手順書では、Glideを使用したサンプルアプリの作成手順を記載する。  
サンプルアプリは、仙台市の指定避難場所を地図上に表示するアプリを作成する。  

## 目次
[**１ 仙台市指定避難所のオープンデータをダウンロード**](#１-仙台市指定避難所のオープンデータをダウンロード)  
[**２ Glideで読み込める形式に変換**](#２-glideで読み込める形式に変換)  
[**３ Glideで変換したスプレッドシートを読み込む**](#３-glideで変換したスプレッドシートを読み込む)  
[**４ 地図上に指定避難所を表示する**](#４-地図上に指定避難所を表示する)  
[**５ アプリケーションの公開**](#５-アプリケーションの公開)  
[**６ アプリケーションの削除方法**](#６-アプリケーションの削除方法)  

## １ 仙台市指定避難所のオープンデータをダウンロード  

1. [仙台市指定避難所のオープンデータがあるサイト](https://www2.wagmap.jp/sendaicity/OpenDataDetail?lid=941&mids=238)に移動  
![仙台市オープンデータ](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_01.png)  

2. 仙台市の指定避難所データからCSV形式のリンクをクリック  
![仙台市指定避難所ダウンロード](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_02.png)  

3. 「ダウンロード」ボタンをクリック  
※指定避難所のCSVファイルがダウンロードされる
![仙台市指定避難所ダウンロード](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_03.png)  

## ２ Glideで読み込める形式に変換  

1. [Googleトップ画面](https://www.google.com/)で、ログインボタンをクリック  
**※Googleアカウントにログイン済の場合は手順5から実施**  
![Googleログイン](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_04.png)  

2. 対象のGoogleアカウントを選択  
![Googleアカウント選択](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_05.png)  

3. パスワードを入力して「次へ」をクリック  
![パスワード入力](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_06.png)  

4. ログインが成功すると、Googleトップ画面が表示される  
![ログイン後](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_07.png)  

5. 右上のアイコンを選択し、「スプレッドシート」をクリック  
![スプレッドシート選択](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_08.png)  

6. 「スプレッドシート」画面が表示されるので、右側のフォルダアイコンをクリック
![ファイル選択ツール](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_09.png)  

7. 「ファイルを開く」画面が表示されるので、「アップロード」タブをクリック  
![アップロード](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_10.png)  

8. 先ほどダウンロードしたCSVファイルを、ドラッグエリアにドラッグアンドドロップ  
![ファイル選択](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_11.png)  

9. アップロードが開始される  
![アップロード開始](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_12.png)  

10. アップロードが完了すると、スプレッドシート形式で開かれる  
![アップロード完了](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_13.png)  

11. L1セルに `位置情報` と入力する  
![CSV編集1](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_14.png)  

12. L2セルにJ列とI列をカンマ区切りで結合する数式 `=J2&","&I2` を入力する  
![CSV編集2](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_15.png)  

13. L2セルをコピーして、L3 から最終行までペーストする  
![CSV編集3](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_16.png)  

14. 数式の結果が正しく設定されているか、以下の観点で確認する  
    - 2行目～最終行まで数式の結果がエラーになっていないこと
    - 緯度(J列)と経度(I列)がカンマ区切りで結合されていること

      ![CSV編集4](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_51.png)  

15.  スプレッドシートの名称とシート名を `仙台市指定避難所` に変更して閉じる  
![CSV編集5](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_17.png)  

## ３ Glideで変換したスプレッドシートを読み込む

1. [Glide](https://www.glideapps.com/)に移動  
![Glideトップ](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_18.png)  

2. 「Log In」ボタンをクリック  
![Log In](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_19.png)  

   **※既にGlideにログイン済の場合は「Open Glide」をクリックし、手順7から実施**  
![Open Glide](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_20.png)  

3. 「Sign in with Google」をクリック  
![Googleログイン](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_21.png)  

4. Googleのログイン画面が表示されるので、対象のアカウントを選択  
![Googleアカウント選択](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_22.png)  

5. パスワード入力画面が表示されるので、パスワードを入力して「次へ」をクリック  
![Googleアカウントパスワード入力](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_23.png)  

6. ログインが成功すると、Glideのホーム画面が表示される  
![ログイン後](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_24.png)  

7. ホーム画面の「New app」をクリック  
![Glideメイン](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_25.png)  

8. 変換した「仙台市指定避難所」を読み込む為に、「Start with data」内の「Google Sheets」を選択して「Continue」をクリック  
![ファイルインポート1](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_26.png)  

9. データの使用方法を聞かれるので、「Import Google Sheet once」を選択して「Continue」をクリック  
![ファイルインポート2](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_27.png)  

10. 変換した「仙台市指定避難所」を選択して「Select」をクリック  
![ファイルインポート3](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_28.png)  

11. Glideへのインポートが成功すると、アプリケーション作成画面が表示される  
![ファイルインポート4](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_29.png)  

## ４ 地図上に指定避難所を表示する  
※手順書内の画像に表示されている内容と異なる画面が表示されてしまった場合は、画面上部の「Layout」をクリックし、画面左側の「COMPONENTS」にある「Map」をクリックすることで戻ることが可能  
![アプリケーション作成1](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_56.png)  

1. 画面左側の「NAVIGATION」にアプリケーションのページ一覧が表示される  
本手順では「仙台市指定避難所」ページのみを利用する為、「Users」ページを右クリック後、Deleteを選択して削除  
![アプリケーション作成1](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_30.png)  

2. 画面左側の「COMPONENTS」にページに配置するパーツ一覧が表示される  
本手順では「Map」コンポーネントのみを利用する為、「Collection」は「×」ボタンで削除  
![アプリケーション作成2](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_31.png)  

3. 左メニューCOMPONENTSの 「+」 ボタンをクリック  
![アプリケーション作成3](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_32.png)  

4. 表示されたリストからMapを選択する  
![アプリケーション作成4](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_33.png)  

5. 右メニューのAddressに「位置情報」を設定する  
![アプリケーション設定5](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_34.png)  

6. ピンをタップした際に避難場所の名称を表示させる為、右メニューTitleの3点リーダー(縦)をクリックし「名称」を設定する  
![アプリケーション設定6](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_52.png)  

7. ピンをタップした際に避難場所の住所を表示させる為、右メニューDescriptionの3点リーダー(縦)をクリックし「住所」を設定する  
![アプリケーション設定7](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_53.png)  

8. 右メニューのStyleに「Standard」を設定する  
![アプリケーション設定8](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_35.png)  

9. 右メニューのSizeに「Large」を設定する  
![アプリケーション設定9](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_54.png)  

10. 地図上に指定避難場所のピンが立っていることを確認  
![アプリケーション設定10](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_36.png)  

11. 地図上のピンをクリックすると、避難所の名称と住所が表示されることを確認  
![アプリケーション設定11](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_55.png)  

## ５ アプリケーションの公開  

1. アプリケーション作成画面右上にある「Publish」ボタンをクリック  
![アプリケーションの公開1](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_37.png)  

2. 公開設定が表示されるので、設定はそのままの状態で「Publish」ボタンをクリック  
![アプリケーションの公開2](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_38.png)  

3. Publishが成功すると接続用のQRコード、URLが表示される  
![アプリケーションの公開3](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_39.png)  

4. サンプルアプリでは、アプリへアクセスする際の認証をなしとする為、「Privacy」 タブをクリック  
![アプリケーションの公開4](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_40.png)  

5. 公開範囲を「Public」に変更し、SIGN-INを「No sign-in」に設定  
![アプリケーションの公開5](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_41.png)  

6. スマートフォンでQRコードを読み込むと、作成したアプリケーションが表示される  
※PCから手順3で表示されたURLを入力しても確認可能（以下はスマートフォンからアクセスした場合）  
![アプリケーションの公開6](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_42.png)  

7. アプリケーション公開の確認完了後、公開範囲をPrivateに戻しておく  
![アプリケーションの公開7](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_43.png)  

## ６ アプリケーションの削除方法

Glideフリーアカウントでは１つのアプリケーションしか公開できないので、アプリケーションの削除方法について記載する  

1. Glideのホーム画面に移動  
![アプリケーションの削除1](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_44.png)  

2. 削除したいアプリケーションを探し、右上のアイコンをクリック  
![アプリケーションの削除2](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_45.png)  

3. 表示されたリストから「Delete」を選択  
![アプリケーションの削除3](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_46.png)  

4. 削除の確認画面が表示されるので、グレーで塗りつぶされている範囲の文字をコピー
![アプリケーションの削除4](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_47.png)  

5. コピーした文字を入力欄に貼り付け  
![アプリケーションの削除5](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_48.png)  

6. 「Delete」ボタンをクリック  
![アプリケーションの削除6](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_49.png)  

7. Glideのホーム画面に、削除したアプリケーションが表示されていないことを確認  
![アプリケーションの削除7](media/Glideサンプルアプリの作成手順/Glideサンプルアプリの作成手順_50.png)  